"use strict";(self.webpackChunkpromptgineering=self.webpackChunkpromptgineering||[]).push([[8644],{3905:(e,a,o)=>{o.d(a,{Zo:()=>u,kt:()=>g});var n=o(67294);function t(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}function r(e,a){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var a=1;a<arguments.length;a++){var o=null!=arguments[a]?arguments[a]:{};a%2?r(Object(o),!0).forEach((function(a){t(e,a,o[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(o,a))}))}return e}function s(e,a){if(null==e)return{};var o,n,t=function(e,a){if(null==e)return{};var o,n,t={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],a.indexOf(o)>=0||(t[o]=e[o]);return t}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],a.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}var l=n.createContext({}),p=function(e){var a=n.useContext(l),o=a;return e&&(o="function"==typeof e?e(a):i(i({},a),e)),o},u=function(e){var a=p(e.components);return n.createElement(l.Provider,{value:a},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},c=n.forwardRef((function(e,a){var o=e.components,t=e.mdxType,r=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=p(o),c=t,g=d["".concat(l,".").concat(c)]||d[c]||m[c]||r;return o?n.createElement(g,i(i({ref:a},u),{},{components:o})):n.createElement(g,i({ref:a},u))}));function g(e,a){var o=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var r=o.length,i=new Array(r);i[0]=c;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s[d]="string"==typeof e?e:t,i[1]=s;for(var p=2;p<r;p++)i[p]=o[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}c.displayName="MDXCreateElement"},35021:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>p,contentTitle:()=>s,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var n=o(87462),t=(o(67294),o(3905));const r=o.p+"assets/images/pal-08b7777800187b41a639d2a8129e7756.webp",i={sidebar_position:4},s="\ud83d\udfe1 C\xf3digo como Racioc\xednio",l={unversionedId:"advanced_applications/pal",id:"advanced_applications/pal",title:"\ud83d\udfe1 C\xf3digo como Racioc\xednio",description:"Os Modelos de Linguagem Auxiliados por Programa (Program-aided Language Models - PALs)(@gao2022pal) s\xe3o outro exemplo de um sistema de MRKL. Quando uma pergunta \xe9 feita, os PALs s\xe3o capazes de escrever c\xf3digo que resolve essa pergunta. Eles enviam o c\xf3digo para uma execu\xe7\xe3o program\xe1tica para obter o resultado. O PAL funciona em contraste com a Cadeia de Pensamento; o racioc\xednio intermedi\xe1rio do PAL \xe9 c\xf3digo, enquanto o do CdP \xe9 linguagem natural.",source:"@site/i18n/pt/docusaurus-plugin-content-docs/current/advanced_applications/pal.md",sourceDirName:"advanced_applications",slug:"/advanced_applications/pal",permalink:"/pt/docs/advanced_applications/pal",draft:!1,editUrl:"https://github.com/trigaten/promptgineering/tree/v1.2.3/docs/advanced_applications/pal.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"\ud83d\udfe1 LLMs que Raciocinam e Reagem",permalink:"/pt/docs/advanced_applications/react"},next:{title:"\u2696\ufe0f Reliability",permalink:"/pt/docs/category/\ufe0f-reliability"}},p={},u=[{value:"Exemplo",id:"exemplo",level:2},{value:"More",id:"more",level:2}],d={toc:u},m="wrapper";function c(e){let{components:a,...o}=e;return(0,t.kt)(m,(0,n.Z)({},d,o,{components:a,mdxType:"MDXLayout"}),(0,t.kt)("h1",{id:"-c\xf3digo-como-racioc\xednio"},"\ud83d\udfe1 C\xf3digo como Racioc\xednio"),(0,t.kt)("p",null,"Os Modelos de Linguagem Auxiliados por Programa ",(0,t.kt)("a",{parentName:"p",href:"https://reasonwithpal.com"},"(Program-aided Language Models - PALs)"),(0,t.kt)("sup",{parentName:"p",id:"fnref-1"},(0,t.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1"))," s\xe3o outro exemplo de um sistema de MRKL. Quando uma pergunta \xe9 feita, os PALs s\xe3o capazes de escrever c\xf3digo que resolve essa pergunta. Eles enviam o c\xf3digo para uma execu\xe7\xe3o program\xe1tica para obter o resultado. O PAL funciona em contraste com a Cadeia de Pensamento; o racioc\xednio intermedi\xe1rio do PAL \xe9 c\xf3digo, enquanto o do CdP \xe9 linguagem natural."),(0,t.kt)("div",{style:{textAlign:"center"}},(0,t.kt)("img",{src:r,style:{width:"500px"}})),(0,t.kt)("div",{style:{textAlign:"center"}},"PAL Example (Gao et al.)"),(0,t.kt)("p",null,"Uma coisa importante a notar \xe9 que o PAL, na verdade, intercala linguagem natural (NL) e c\xf3digo. Na imagem acima, em azul, est\xe3o os racioc\xednios em linguagem natural que o PAL gera. Embora isso n\xe3o seja mostrado na imagem, o PAL, na verdade, gera um '#' antes de cada linha de racioc\xednio em NL, para que sejam interpretados como coment\xe1rios pela execu\xe7\xe3o program\xe1tica."),(0,t.kt)("h2",{id:"exemplo"},"Exemplo"),(0,t.kt)("p",null,"Vamos ver um exemplo de PAL resolvendo uma quest\xe3o de matem\xe1tica. Eu uso um prompt de 3 disparos, que \xe9 uma vers\xe3o simplificada ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/reasoning-machines/pal/blob/main/pal/prompt/math_prompts.py"},"deste aqui"),(0,t.kt)("sup",{parentName:"p",id:"fnref-1"},(0,t.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1")),"."),(0,t.kt)("p",null,"Usarei o LangChain, um pacote Python para encadear a funcionalidade do LLM. Primeiro, s\xe3o necess\xe1rias algumas instala\xe7\xf5es:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-python"},'!pip install langchain==0.0.26\n!pip install openai\nfrom langchain.llms import OpenAI\nimport os\nos.environ["OPENAI_API_KEY"] = "sk-SUA_CHAVE_AQUI"\n')),(0,t.kt)("p",null,"Ent\xe3o, podemos criar uma inst\xe2ncia do GPT-3 davinci-002 (uma chamada de API acontece quando usamos esse objeto)"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"llm = OpenAI(model_name='text-davinci-002', temperature=0)\n")),(0,t.kt)("p",null,"Aqui est\xe1 o prompt de poucos disparos:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-python"},'MATH_PROMPT = \'\'\'\nQ: Havia nove computadores na sala do servidor. Cinco computadores foram instalados a cada dia, de segunda a quinta-feira. Quantos computadores h\xe1 agora na sala do servidor?\n\n# solu\xe7\xe3o em Python:\n"""Havia nove computadores na sala do servidor. Cinco computadores foram instalados a cada dia, de segunda a quinta-feira. Quantos computadores h\xe1 agora na sala do servidor?"""\ncomputador_inicio = 9\ncomputador_por_dia = 5\nnum_dias = 4  # 4 dias entre segunda e quinta\ncomputadores_adicionados = computador_por_dia * num_dias\ncomputadores_total = computador_inicio + computadores_adicionados\nresultado = computadores_total\nreturn resultado\n\n\nQ: Dani tem cinco brinquedos. Para o Natal, ela ganhou dois brinquedos de seu pai e dois da sua m\xe3e. Quantos brinquedos ela tem agora?\n\n# solu\xe7\xe3o em Python:\n"""Dani tem cinco brinquedos. Para o Natal, ela ganhou dois brinquedos de seu pai e dois da sua m\xe3e. Quantos brinquedos ela tem agora?"""\nbrinquedos_inicio = 5\nmae_brinquedos = 2\npai_brinquedos = 2\nbrinquedos_recebidos= mae_brinquedos + pai_brinquedos\ntotal_brinquedos= brinquedos_inicio + brinquedos_recebidos\nresultado = total_brinquedos\nreturn resultado\n\n\nQ: Jason tinha 20 pirulitos. Ele deu alguns para o Denny. Agora Jason tem 12 pirulitos. Quantos pirulitos ele deu para o Denny?\n\n# solu\xe7\xe3o em Python:\n"""Jason tinha 20 pirulitos. Ele deu alguns para o Denny. Agora Jason tem 12 pirulitos. Quantos pirulitos ele deu para o Denny?"""\njason_pirulitos_inicio = 20\njason_pirulitos_fim = 12\ndenny_pirulitos = jason_pirulitos_inicio - jason_pirulitos_fim\nresultado = denny_pirulitos\nreturn resultado\n\n\nQ: {pergunta}\n\n# solu\xe7\xe3o em Python:\n\'\'\'\n')),(0,t.kt)("p",null,"Agora podemos passar esse prompt combinado para o GPT-3."),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre"},"llm_out = llm(MATH_PROMPT.format(question=question))\nprint(llm_out)\n")),(0,t.kt)("p",null,"A sa\xedda \xe9:"),(0,t.kt)("pre",null,(0,t.kt)("span",{className:"bluegreen-highlight"},"Emma levou uma viagem de avi\xe3o de 60 minutos para Minas Gerais. Ela ent\xe3o pegou um trem de 2 horas para Ouro Preto, e ent\xe3o um \xf4nibus de 30 minutos para Ouro Branco. Quanto tempo ela levou para chegar a Ouro Branco?",(0,t.kt)("br",null),(0,t.kt)("br",null),"viagem_aviao = 60",(0,t.kt)("br",null),"viagem_trem = 2 * 60  # 2 horas em minutos",(0,t.kt)("br",null),"viagem_onibus = 30",(0,t.kt)("br",null),"total_tempo = viagem_aviao + viagem_trem + viagem_onibus",(0,t.kt)("br",null),"resultado = total_time")),(0,t.kt)("p",null,"Finalmente, podemos passar esse c\xf3digo para um runtime no Python e obter a resposta:"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-python"},"exec(llm_out)\nprint(result)\n")),(0,t.kt)("p",null,"A sa\xedda \xe9 ",(0,t.kt)("strong",{parentName:"p"},"210"),", o que \xe9 correta."),(0,t.kt)("p",null,"Veja o notebook Jupyter para esse exemplo ",(0,t.kt)("a",{parentName:"p",href:"https://github.com/trigaten/Learn_Prompting/tree/main/docs/code_examples/PAL.ipynb"},"here"),"."),(0,t.kt)("h2",{id:"more"},"More"),(0,t.kt)("p",null,"Confira tamb\xe9m ",(0,t.kt)("a",{parentName:"p",href:"https://colab.research.google.com/drive/1u4_RsdI0E79PCMDdcPiJUzYhdnjoXeXc?usp=sharing#scrollTo=Ba0ycacK4i1V"},"esse exemplo"),"."),(0,t.kt)("div",{className:"footnotes"},(0,t.kt)("hr",{parentName:"div"}),(0,t.kt)("ol",{parentName:"div"},(0,t.kt)("li",{parentName:"ol",id:"fn-1"},"Gao, L., Madaan, A., Zhou, S., Alon, U., Liu, P., Yang, Y., Callan, J., & Neubig, G. (2022).\n",(0,t.kt)("a",{parentName:"li",href:"#fnref-1",className:"footnote-backref"},"\u21a9")))))}c.isMDXComponent=!0}}]);